// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
// 
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------

#nullable enable

using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Text.Json.Serialization;
using System.Threading.Tasks;
using SpaceDotNet.Client.Internal;
using SpaceDotNet.Common;
using SpaceDotNet.Common.Json.Serialization;
using SpaceDotNet.Common.Types;

namespace SpaceDotNet.Client
{
    public partial class CalendarClient
    {
        private readonly Connection _connection;
        
        public CalendarClient(Connection connection)
        {
            _connection = connection;
        }
        
        public MeetingClient Meetings => new MeetingClient(_connection);
        
        public partial class MeetingClient
        {
            private readonly Connection _connection;
            
            public MeetingClient(Connection connection)
            {
                _connection = connection;
            }
            
            /// <summary>
            /// Create a meeting. Note: all-day events are not supported yet.
            /// </summary>
            public async Task<DTOMeetingDto> CreateMeetingAsync(CreateMeetingRequest data, Func<Partial<DTOMeetingDto>, Partial<DTOMeetingDto>> partial = null)
                => await _connection.RequestResourceAsync<CreateMeetingRequest, DTOMeetingDto>("POST", $"api/http/calendars/meetings?$fields={(partial != null ? partial(new Partial<DTOMeetingDto>()) : Partial<DTOMeetingDto>.Default())}", data);
        
            /// <summary>
            /// Search meetings by name, location, time period and other parameters. Parameters are applied as 'AND' filters while values in lists of locations, profiles and teams have 'OR' semantics.
            /// </summary>
            public async Task<Batch<DTOMeetingDto>> GetAllMeetingsAsync(string summaryQuery, List<string> locationsQuery, List<string> profiles, List<string> teams, bool includePrivate, bool includeArchived, string? skip = null, int? top = null, SpaceTime? startingAfter = null, SpaceTime? endingBefore = null, string? organizer = null, Func<Partial<Batch<DTOMeetingDto>>, Partial<Batch<DTOMeetingDto>>> partial = null)
                => await _connection.RequestResourceAsync<Batch<DTOMeetingDto>>("GET", $"api/http/calendars/meetings?$skip={skip?.ToString() ?? "null"}&$top={top?.ToString() ?? "null"}&summaryQuery={summaryQuery.ToString()}&locationsQuery={locationsQuery.JoinToString("locationsQuery", it => it.ToString())}&startingAfter={startingAfter?.ToString() ?? "null"}&endingBefore={endingBefore?.ToString() ?? "null"}&profiles={profiles.JoinToString("profiles", it => it.ToString())}&teams={teams.JoinToString("teams", it => it.ToString())}&organizer={organizer?.ToString() ?? "null"}&includePrivate={includePrivate.ToString().ToLowerInvariant()}&includeArchived={includeArchived.ToString().ToLowerInvariant()}&$fields={(partial != null ? partial(new Partial<Batch<DTOMeetingDto>>()) : Partial<Batch<DTOMeetingDto>>.Default())}");
            
            /// <summary>
            /// Search meetings by name, location, time period and other parameters. Parameters are applied as 'AND' filters while values in lists of locations, profiles and teams have 'OR' semantics.
            /// </summary>
            public IAsyncEnumerable<DTOMeetingDto> GetAllMeetingsAsyncEnumerable(string summaryQuery, List<string> locationsQuery, List<string> profiles, List<string> teams, bool includePrivate, bool includeArchived, string? skip = null, int? top = null, SpaceTime? startingAfter = null, SpaceTime? endingBefore = null, string? organizer = null, Func<Partial<DTOMeetingDto>, Partial<DTOMeetingDto>> partial = null)
                => BatchEnumerator.AllItems(batchSkip => GetAllMeetingsAsync(summaryQuery, locationsQuery, profiles, teams, includePrivate, includeArchived, skip: batchSkip, top, startingAfter, endingBefore, organizer, partial: builder => Partial<Batch<DTOMeetingDto>>.Default().WithNext().WithTotalCount().WithData(partial != null ? partial : _ => Partial<DTOMeetingDto>.Default())), skip);
        
            public async Task<DTOMeetingDto> GetMeetingAsync(string id, Func<Partial<DTOMeetingDto>, Partial<DTOMeetingDto>> partial = null)
                => await _connection.RequestResourceAsync<DTOMeetingDto>("GET", $"api/http/calendars/meetings/{id}?$fields={(partial != null ? partial(new Partial<DTOMeetingDto>()) : Partial<DTOMeetingDto>.Default())}");
        
            /// <summary>
            /// Patch a meeting. Only not-null parameters and not empty diffs will be applied.
            /// </summary>
            public async Task<DTOMeetingDto> UpdateMeetingAsync(string id, UpdateMeetingRequest data, Func<Partial<DTOMeetingDto>, Partial<DTOMeetingDto>> partial = null)
                => await _connection.RequestResourceAsync<UpdateMeetingRequest, DTOMeetingDto>("PATCH", $"api/http/calendars/meetings/{id}?$fields={(partial != null ? partial(new Partial<DTOMeetingDto>()) : Partial<DTOMeetingDto>.Default())}", data);
        
            public async Task<DTOMeetingDto> DeleteMeetingAsync(string id, RecurrentModification modificationKind, SpaceTime? targetDate = null, Func<Partial<DTOMeetingDto>, Partial<DTOMeetingDto>> partial = null)
                => await _connection.RequestResourceAsync<DTOMeetingDto>("DELETE", $"api/http/calendars/meetings/{id}?targetDate={targetDate?.ToString() ?? "null"}&modificationKind={modificationKind.ToString()}&$fields={(partial != null ? partial(new Partial<DTOMeetingDto>()) : Partial<DTOMeetingDto>.Default())}");
        
        }
    
    }
    
}
